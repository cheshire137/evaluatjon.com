<ul class="list-unstyled ratings-list">
  <li class="clearfix">
    <form ng-submit="create_rating()">
      <div class="alert alert-danger" ng-show="new_rating.error_messages.length > 0">
        <button type="button" class="close" ng-click="new_rating.error_messages = []"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <ul class="rating-errors list-unstyled">
          <li ng-repeat="message in new_rating.error_messages">
            {{message}}
          </li>
        </ul>
      </div>
      <div class="form-group clearfix">
        <div class="star-rating pull-left" star-rater rating-value="new_rating.stars" data-max="10" on-rating-selected="set_new_rating_stars(rating)"></div>
        <button type="submit" class="btn btn-primary pull-right">Rate Jon</button>
      </div>
      <div class="form-group clearfix">
        <input type="text" ng-model="new_rating.dimension" class="pull-left form-control" id="rating_dimension" placeholder="What trait are you rating?">
        <input type="text" ng-model="new_rating.rater" class="pull-right form-control" id="rating_rater" placeholder="Your name">
      </div>
      <div class="form-group">
        <textarea class="form-control" ng-model="new_rating.comment" id="rating_comment" placeholder="Comment"></textarea>
      </div>
    </form>
  </li>
  <li ng-repeat="rating in ratings" class="clearfix">
    <div class="star-rating pull-right" star-rating rating-value="rating.stars" data-max="10"></div>
    <strong>{{rating.dimension}}</strong> -
    <em>{{rating.rater}}</em>
    <p class="help-block">{{rating.comment}}</p>
    <time am-time-ago="rating.created_at" title="{{rating.created_at}}"></time>
  </li>
</ul>

<hr>

<div class="row">
  <div class="col-sm-9 col-md-7">
    <p ng-hide="auth_status.logged_in">
      <a ng-click="toggle.show_login_form = !toggle.show_login_form">
        Manage ratings
      </a>
    </p>

    <p ng-show="auth_status.logged_in">
      You are signed in as <strong>{{auth_status.user.email}}</strong>.
    </p>

    <form class="form-horizontal" ng-submit="login()" ng-show="toggle.show_login_form && !auth_status.logged_in">
      <div class="form-group">
        <label for="user_email" class="control-label col-sm-4">Email address:</label>
        <div class="col-sm-8">
          <input type="text" class="form-control" id="user_email" ng-model="credentials.email">
        </div>
      </div>
      <div class="form-group">
        <label for="user_password" class="control-label col-sm-4">Password:</label>
        <div class="col-sm-8">
          <input type="password" class="form-control" id="user_password" ng-model="credentials.password">
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-4 col-sm-8">
          <button type="submit" class="btn btn-primary">Sign In</button>
        </div>
      </div>
    </form>
  </div>
</div>
